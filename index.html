<script type="module">
    // ... (baaki setup same rahega) ...

    async function getAIResponse(text) {
        statusText.innerText = "Khushi soch rahi hai...";
        try {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: "Tumhara naam Khushi hai. Prince ko Hindi mein 1 line mein jawab do: " + text }] }] })
            });
            const data = await response.json();
            
            // Prince, agar yahan error hai toh screen par dikhega
            if (data.error) {
                statusText.innerText = "API Error: " + data.error.message;
                return;
            }

            const reply = data.candidates[0].content.parts[0].text;
            statusText.innerText = "Khushi: " + reply;
            
            // Awaaz ko force chalu karne ke liye
            const ut = new SpeechSynthesisUtterance(reply);
            ut.lang = 'hi-IN';
            ut.rate = 1.0; 
            window.speechSynthesis.speak(ut);

        } catch (err) {
            statusText.innerText = "Connection Error!";
        }
    }
</script>
